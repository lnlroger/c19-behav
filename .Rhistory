df<-read.csv(here("df_covid_long.csv"))%>%
filter(!is.na(StringencyIndex))
df%>%
filter(!is.na(Movement))%>%
summary(df$Movement)
df%>%
filter(!is.na(Movement))%>%
summary(Movement)
summary(Movement,data=df)
summary(Movement,df)
summary(df$Movement,df)
summary(df$Movement,na.rm=T)
df%>%
#filter(Country=="Greece"|Country=="Germany")%>%
filter(!is.na(COL))%>%
mutate(CaseLog=scale(log(TotalCases)))%>%
mutate(DeathLog=scale(log(TotalDeaths)))%>%
mutate(Country = forcats::fct_reorder(Country,as.numeric(Continent))) %>%
group_by(Continent,Country)%>%
#ggplot(aes(x=as.Date(Date),y=Movement,colour=Country,linetype=InLock))+
ggplot(aes(x=StringencyIndex,y=Movement,col=Continent))+
geom_point(col="black") +
geom_smooth()+
facet_wrap(~Country)+
scale_colour_brewer(palette = 'Set1')+
theme_bw()
print("Summary of Movement (per Google report)")
print("Summary of Oxford's strinency index")
summary(df$Movement)
table(summary(df$Movement))
kable(summary(df$Movement))
kable_table(summary(df$Movement))
kable(summary(df$Movement))
knitr::kable(head(mtcars[, 1:4]), "pandoc")
knitr::kable(summary(df$Movement), "pandoc")
kable(df$Movement)
describe(df$Movement)
library(Hmisc)
install.packages("Hmisc")
describe(df$Movement)
??describe
library(Hmisc)
??describe
library(Hmisc)
describe(df$Movement)
describe(df$StringencyIndex)
class(describe(df$StringencyIndex))
as.table(describe(df$StringencyIndex))
as.df(describe(df$StringencyIndex))
as.data.frame(describe(df$StringencyIndex))
Ox<-readRDS("OxfordTracking/covid-policy-tracker-master/data/Oxf.rds")%>%
rename(Country=CountryName)%>%
mutate(Country=countrycode::countrycode(Country,"country.name","country.name"))%>%
mutate(Date=lubridate::ymd(Date))%>%
mutate(week=lubridate::floor_date(Date,"week"))
head(Ox)
summary(Ox$C1_Flag)
summary(Ox$C1_Flag[1])
summary(Ox$C1_Flag[100])
summary(Ox$C1_School.closing])
summary(Ox$C1_School.closing)
OxVars<-c('C1_School.closing', 'C1_Flag', 'C2_Workplace.closing','C2_Flag','C3_Cancel.public.events','C3_Flag','C4_Restrictions.on.gatherings','C4_Flag','C5_Close.public.transport','C6_Stay.at.home.requirements','C6_Flag','C7_Restrictions.on.internal.movement','C7_Flag,C8_International.travel.controls','H1_Public.information.campaigns','H1_Flag')
GoogleVars<-c('retail_abdrecreation_percentage_change_from_baseline', 'grocery_and_pharmacy_percentage_change_from_baseline', 'parks_percentage_change_from_baseline', 'transit_stations_percentage_change_from_baseline', 'workplaces_percentage_change_from_baseline','residential_percentage_change_from_baseline','Movement')
summary(df$OxVars[1])
GoogleVars
?reshape
dfl<-reshape(df,
idvar = "Country",
varying = list(GoogleVars, StringencyIndex),
v.names = 'Value',
timevar='Type',
rection = "long")
dfl<-reshape(df,
idvar = "Country",
varying = list(GoogleVars, StringencyIndex),
v.names = 'Value',
timevar='Type',
direction = "long")
dfl<-reshape(df,
idvar = "Country",
varying = list(GoogleVars),
v.names = 'Value',
timevar='Type',
direction = "long")
dfl<-reshape(df,
idvar = "Country",
varying = list(Movement,StringencyIndex),
v.names = 'Value',
timevar='Type',
direction = "long")
dfl<-reshape(df,
idvar = "Country",
varying = list(c('Movement','StringencyIndex')),
v.names = 'Value',
timevar='Type',
direction = "long")
dfl<-reshape(df,
idvar = "Country",
varying = list(c('Movement','StringencyIndex')),
v.names = 'ValueOf',
timevar='Type',
direction = "long")
df$Movement[1]
dfl<-reshape(df,
idvar = "Date",
varying = list(c('Movement','StringencyIndex')),
v.names = 'Value',
timevar='Type',
direction = "long")
summary(Indometh)
wide <- reshape(Indometh, v.names = "conc", idvar = "Subject",
timevar = "time", direction = "wide")
wide
reshape(wide, direction = "long")
reshape(wide, idvar = "Subject", varying = list(2:12),
v.names = "conc", direction = "long")
dfl<-reshape(df,
idvar = c("Date","Country"),
varying = list(c('Movement','StringencyIndex')),
v.names = 'Value',
timevar='Type',
direction = "long")
dfl<-reshape(df,
varying = list(c('Movement','StringencyIndex')),
v.names = 'Value',
timevar='Type',
direction = "long")
View(dfl)
dfl<-reshape(df,
varying = list(c('Movement','StringencyIndex')),
v.names = 'Value',
timevar='Type',
direction = "long")%>%
dplyr::select("Country",GoogleVars)
dfl<-reshape(df,
varying = list(c('Movement','StringencyIndex')),
v.names = 'Value',
timevar='Type',
direction = "long")%>%
dplyr::select(GoogleVars)
dfl<-reshape(df,
varying = list(c('Movement','StringencyIndex')),
v.names = 'Value',
timevar='Type',
direction = "long")%>%
dplyr::select(names(GoogleVars))
dfl<-reshape(df,
varying = list(c('Movement','StringencyIndex')),
v.names = 'Value',
timevar='Type',
direction = "long")%>%
dplyr::select(GoogleVars)
dfl<-reshape(df,
varying = list(c('Movement','StringencyIndex')),
v.names = 'Value',
timevar='Type',
direction = "long")%>%
dplyr::select(Country)
dfl<-reshape(df,
varying = list(c('Movement','StringencyIndex')),
v.names = 'Value',
timevar='Type',
direction = "long")%>%
dplyr::select(Country,Movement,Value,Type)
dfl<-reshape(df,
varying = list(c('Movement','StringencyIndex')),
v.names = 'Value',
timevar='Type',
direction = "long")%>%
dplyr::select(c(Country,Movement,Value,Type))
dfl<-reshape(df,
varying = list(c('Movement','StringencyIndex')),
v.names = 'Value',
timevar='Type',
direction = "long")%>%
dplyr::select(Country,Movement)
dfl<-reshape(df,
varying = list(c('Movement','StringencyIndex')),
v.names = 'Value',
timevar='Type',
direction = "long")%>%
dplyr::select(c(Country,Movement))
??select
??dplyr::select
dfl<-reshape(df,
varying = list(c('Movement','StringencyIndex')),
v.names = 'Value',
timevar='Type',
direction = "long")%>%
dplyr::select(Country,Movement)
dplyr::select(Country,Date
dfl<-reshape(df,
varying = list(c('Movement','StringencyIndex')),
v.names = 'Value',
timevar='Type',
direction = "long")%>%
dplyr::select(Country,Date)
View(dfl)
dfl<-reshape(df,
varying = list(c('Movement','StringencyIndex')),
v.names = 'Value',
timevar='Type',
direction = "long")%>%
dplyr::select(Country,Date,Value,Type)
View(dfl)
dfl<-reshape(df,
varying = list(c('Movement','StringencyIndex')),
v.names = 'Value',
timevar='Type',
direction = "long")
head(dfl)
dfl<-reshape(df,
varying = list(c('Movement','StringencyIndex')),
v.names = 'Value',
timevar='Type',
direction = "long")%>%
dplyr::select(Country,Date,Value,Type)
View(dfl)
dfl<-reshape(df,
varying = list(c('Movement','StringencyIndex')),
#v.names = 'Value',
timevar='Type',
direction = "long")%>%
dplyr::select(Country,Date,Value,Type)
dfl<-reshape(df,
varying = list(c('Movement','StringencyIndex')),
v.names = c('Movement',"Index"),
timevar='Type',
direction = "long")%>%
dplyr::select(Country,Date,Value,Type)
dfl<-reshape(df,
varying = list(c('Movement','StringencyIndex')),
v.names = 'Value',
timevar='Type',
direction = "long")%>%
dplyr::select(Country,Date,Value,Type)
View(dfl)
dfl<-reshape(df,
varying = list(c(GoogleVars,'StringencyIndex')),
v.names = 'Value',
timevar='Type',
direction = "long")%>%
dplyr::select(Country,Date,Value,Type)
GoogleVars
paste0(GoogleVars)
paste0(GoogleVars,sep="")
?paste0
GoogleVars
paste0(GoogleVars,sep=",")
dfl<-reshape(df,
varying = list(c(paste0(GoogleVars,sep=","),'StringencyIndex')),
v.names = 'Value',
timevar='Type',
direction = "long")%>%
dplyr::select(Country,Date,Value,Type)
paste0(GoogleVars,sep=",")
varying = list(c(paste0(GoogleVars,sep=",")),
dfl<-reshape(df,
varying = list(c(paste0(GoogleVars,sep=","))),
v.names = 'Value',
timevar='Type',
direction = "long")%>%
dplyr::select(Country,Date,Value,Type)
dfl<-reshape(df,
varying = list(c(paste0(GoogleVars,sep="",collapse=","),'StringencyIndex')),
v.names = 'Value',
timevar='Type',
direction = "long")%>%
dplyr::select(Country,Date,Value,Type)
paste0(GoogleVars,sep="",collapse=",")
paste0(GoogleVars,collapse=",")
paste0(GoogleVars,sep="",collapse=",")
paste0("GoogleVars",sep="",collapse=",")
paste0(GoogleVars,"",sep="",collapse=",")
paste0(GoogleVars,sep="",collapse=",")
paste0(GoogleVars,collapse=",")
paste0(GoogleVars)
paste0(GoogleVars,sep=,)
paste0(GoogleVars,sep=",")
paste0(GoogleVars,sep="")
paste0(GoogleVars,sep="","")
paste0(GoogleVars,sep="','")
paste0(GoogleVars,collapse=",")
paste0(GoogleVars,collapse="","")
paste0(GoogleVars,collapse="','")
names(GoogleVars)
dfl<-reshape(df,
varying = list(c('retail_abdrecreation_percentage_change_from_baseline', 'grocery_and_pharmacy_percentage_change_from_baseline', 'parks_percentage_change_from_baseline', 'transit_stations_percentage_change_from_baseline', 'workplaces_percentage_change_from_baseline','residential_percentage_change_from_baseline','Movement','StringencyIndex')),
v.names = 'Value',
timevar='Type_of_Data',
direction = "long")%>%
dplyr::select(Country,Date,,Value,Type_of_Data)
dfl<-reshape(df,
varying = list(c('retail_abdrecreation_percentage_change_from_baseline', 'grocery_and_pharmacy_percentage_change_from_baseline', 'parks_percentage_change_from_baseline', 'transit_stations_percentage_change_from_baseline', 'workplaces_percentage_change_from_baseline','residential_percentage_change_from_baseline','Movement','StringencyIndex')),
v.names = 'Value',
timevar='Type_of_Data',
direction = "long")
dfl<-reshape(df,
varying = list(c('retail_and_recreation_percentage_change_from_baseline', 'grocery_and_pharmacy_percentage_change_from_baseline', 'parks_percentage_change_from_baseline', 'transit_stations_percentage_change_from_baseline', 'workplaces_percentage_change_from_baseline','residential_percentage_change_from_baseline','Movement','StringencyIndex')),
v.names = 'Value',
timevar='Type_of_Data',
direction = "long")%>%
dplyr::select(Country,Date,,Value,Type_of_Data)
dfl<-reshape(df,
varying = list(c('retail_and_recreation_percent_change_from_baseline', 'grocery_and_pharmacy_percent_change_from_baseline', 'parks_percent_change_from_baseline', 'transit_stations_percent_change_from_baseline', 'workplaces_percent_change_from_baseline','residential_percent_change_from_baseline','Movement','StringencyIndex')),
v.names = 'Value',
timevar='Type_of_Data',
direction = "long")%>%
dplyr::select(Country,Date,Value,Type_of_Data)
GoogleVars<-c('retail_and_recreation_percent_change_from_baseline', 'grocery_and_pharmacy_percent_change_from_baseline', 'parks_percent_change_from_baseline', 'transit_stations_percent_change_from_baseline', 'workplaces_percent_change_from_baseline','residential_percent_change_from_baseline','Movement')
dfl<-reshape(df,
varying = list(c(GoogleVars,'StringencyIndex')),
v.names = 'Value',
timevar='Type_of_Data',
direction = "long")%>%
dplyr::select(Country,Date,Value,Type_of_Data)
View(dfl)
?reshape
dfl<-reshape(df,
idvar="id",
varying = list(c(GoogleVars,'StringencyIndex')),
v.names = 'Value',
timevar='Type',
direction = "long")%>%
dplyr::select(Country,Date,Value,Type)
View(dfl)
dfl<-reshape(df,
varying = list(c(GoogleVars,'StringencyIndex')),
v.names = 'Value',
timevar='Type',
direction = "long")%>%
dplyr::select(Country,Date,Value,Type)
dfl<-reshape(df,
varying = list(c(GoogleVars,'StringencyIndex')),
v.names = 'Value',
timevar='Type',
direction = "long")%>%
dplyr::select(Country,Date,Value,Type)
View(dfl)
dfl<-reshape(df,
varying = list(c(GoogleVars,'StringencyIndex')),
v.names = 'Value',
direction = "long")%>%
dplyr::select(Country,Date,Value,Type)
View(dfl)
dfl<-reshape(df,
varying = list(c(GoogleVars,'StringencyIndex')),
v.names = 'Value',
direction = "long")%>%
dplyr::select(Country,Date,Value)
dfl<-reshape(df,
varying = list(c(GoogleVars,'StringencyIndex')),
v.names = 'Value',
direction = "long")
head(dfl)
View(dfl)
dfl<-reshape(df,
varying = list(c(GoogleVars,'StringencyIndex')),
v.names = 'Value',
timevar='Type',
times=c(GoogleVars,'StringencyIndex'),
direction = "long")%>%
dplyr::select(Country,Date,Value,Type)
View(dfl)
class(dfl$Date)
dfl$Date[1]
dfl$Date[2]
ymd(dfl$Date[1])
class(ymd(dfl$Date[1]))
dfl<-reshape(df,
varying = list(c(GoogleVars,'StringencyIndex')),
v.names = 'Value',
timevar='Type',
times=c(GoogleVars,'StringencyIndex'),
direction = "long")%>%
dplyr::select(Country,Date,Value,Type)%>%
mutate(Date=ymd(Date))
dfl<-reshape(df,
varying = list(c(GoogleVars,'StringencyIndex')),
v.names = 'Value',
timevar='Type',
times=c(GoogleVars,'StringencyIndex'),
direction = "long")%>%
# dplyr::select(Country,Continent,Date,Value,Type)%>%
mutate(Date=ymd(Date))
dfl%>%
filter(Type="Movement"|Type="StringencyIndex")%>%
group_by(Continent)%>%
ggplot(aes(x=Date,y=Value,col=Type))%>%
geom_point()
dfl<-reshape(df,
varying = list(c(GoogleVars,'StringencyIndex')),
v.names = 'Value',
timevar='Type',
times=c(GoogleVars,'StringencyIndex'),
direction = "long")%>%
# dplyr::select(Country,Continent,Date,Value,Type)%>%
mutate(Date=ymd(Date))
dfl%>%
filter(Type="Movement"|Type="StringencyIndex")%>%
group_by(Continent)%>%
ggplot(aes(x=Date,y=Value,col=Type))%>%
geom_point()
dfl%>%
filter(Type="Movement"|Type="StringencyIndex")%>%
group_by(Continent)+
ggplot(aes(x=Date,y=Value,col=Type))%>%
geom_point()
dfl%>%
filter(Type="Movement"|Type="StringencyIndex")%>%
group_by(Continent)%>%
ggplot(aes(x=Date,y=Value,col=Type))+
geom_point()
dfl%>%
filter(Type="Movement"|Type="StringencyIndex")
dfl%>%
filter(Type=="Movement"|Type=="StringencyIndex")%>%
group_by(Continent)%>%
ggplot(aes(x=Date,y=Value,col=Type))+
geom_point()
dfl%>%
filter(Type=="Movement"|Type=="StringencyIndex")%>%
group_by(Continent)%>%
ggplot(aes(x=Date,y=Value,col=Type))+
geom_point()+
facet_wrap(Continent)
dfl%>%
filter(Type=="Movement"|Type=="StringencyIndex")%>%
group_by(Continent)%>%
ggplot(aes(x=Date,y=Value,col=Type))+
geom_point()+
facet_wrap(~Continent)
dfl%>%
filter(Type=="Movement"|Type=="StringencyIndex"|!is.na(COL))%>%
group_by(Country)%>%
ggplot(aes(x=Date,y=Value,col=Type))+
geom_point()+
facet_wrap(~Country)
dfl%>%
filter(!is.na(COL))%>%
filter(Type=="Movement"|Type=="StringencyIndex")%>%
group_by(Country)%>%
ggplot(aes(x=Date,y=Value,col=Type))+
geom_point()+
facet_wrap(~Country)
dfl%>%
filter(!is.na(COL),!is.na(Movement),!is.na(StringencyIndex))%>%
filter(Type=="Movement"|Type=="StringencyIndex")%>%
group_by(Country)%>%
ggplot(aes(x=Date,y=Value,col=Type))+
geom_point()+
facet_wrap(~Country)
dfl%>%
filter(!is.na(COL))%>%
filter(Type=="Movement"|Type=="StringencyIndex")%>%
group_by(Country)%>%
ggplot(aes(x=Date,y=Value,col=Type))+
geom_point()+
facet_wrap(~Country)
dfl%>%
filter(!is.na(COL))%>%
filter(Type=="Movement"|Type=="StringencyIndex")%>%
group_by(Country)%>%
ggplot(aes(x=Date,y=Value,col=Type))+
geom_point()+
facet_wrap(~Country)+
theme_bw
dfl%>%
filter(!is.na(COL))%>%
filter(Type=="Movement"|Type=="StringencyIndex")%>%
group_by(Country)%>%
ggplot(aes(x=Date,y=Value,col=Type))+
geom_point()+
facet_wrap(~Country)+
theme_bw()
dfl%>%
filter(!is.na(COL))%>%
filter(Type=="Movement"|Type=="StringencyIndex")%>%
group_by(Country)%>%
ggplot(aes(x=Date,y=Value,col=Type))+
geom_point()+
geom_smooth()+
facet_wrap(~Country)+
theme_bw()
df%>%
#filter(Country=="Greece"|Country=="Germany")%>%
filter(!is.na(COL))%>%
mutate(CaseLog=scale(log(TotalCases)))%>%
mutate(DeathLog=scale(log(TotalDeaths)))%>%
mutate(Country = forcats::fct_reorder(Country,as.numeric(Continent))) %>%
group_by(Continent,Country)%>%
#ggplot(aes(x=as.Date(Date),y=Movement,colour=Country,linetype=InLock))+
ggplot(aes(x=StringencyIndex,y=Movement,col=Continent))+
geom_point(col="black") +
geom_smooth()+
facet_wrap(~Country)+
scale_colour_brewer(palette = 'Set1')+
theme_bw()
df%>%
#filter(Country=="Greece"|Country=="Germany")%>%
filter(!is.na(COL))%>%
mutate(CaseLog=scale(log(TotalCases)))%>%
mutate(DeathLog=scale(log(TotalDeaths)))%>%
mutate(Country = forcats::fct_reorder(Country,as.numeric(Continent))) %>%
group_by(Continent,Country)%>%
#ggplot(aes(x=as.Date(Date),y=Movement,colour=Country,linetype=InLock))+
ggplot(aes(x=StringencyIndex,y=Movement,col=Continent))+
geom_point(col="black") +
geom_smooth()+
facet_wrap(~Country)+
scale_colour_brewer(palette = 'Set1')+
theme_bw()
