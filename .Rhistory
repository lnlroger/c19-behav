mutate(Country=countrycode(Country,'country.name','country.name')) %>%
rename(Democracy=E235,Democraticness=E236,Civil=E124,Opression=E229)%>%
group_by(Country)%>%
filter(Wave==max(Wave)) #I keep the values for each country with the most recent available wave
rol<-read.csv("WB/RuleOfLaw2018.csv")%>%
mutate(Country=Country.Name,ROL=as.numeric(levels(X2018..YR2018.))[X2018..YR2018.])%>%
mutate(Country=countrycode(Country,'country.name','country.name')) %>%
dplyr::select(Country,Country.Code,ROL)%>%
mutate(Country.Code=recode_factor(Country.Code,
'ROM'="ROU"))
#flu<-read.csv("influenza-vaccination-rates.csv")%>%
#group_by(Country.Code)%>%
#summarise(Time=last(time),VaccinationRate=last(value))%>%
#mutate(OECE=1)
#RolFlu<-merge(rol,flu,by="Country.Code",all=T)
#countries<-read.csv(here::here("Countries.csv"))%>%
#mutate(Country=trimws(Country))%>%
# mutate(Population:Service=as.numberic(Population:Service))
#WORLD BANK
# wb<-merge(merge(merge(merge(
#                 read.csv("WB_GDP_pc.csv"),
#                 read.csv("WB_unemployment.csv"),by="Country.Code",all=T),
#                 read.csv("WB_communicable.csv"),by="Country.Code",all=T),
#                 read.csv("WB_1564.csv"),by="Country.Code",all=T),
#                 read.csv("WB_65up.csv"),by="Country.Code",all=T)
#write.csv(wb,"WorldBank.csv")
wb<-read.csv("WB/WorldBank.csv")%>%
mutate(Country=countrycode(Country.Code,'wb','country.name'))%>%
mutate(log_GDP_pc=log(GDP_pc))
wb<-merge(wb,read.csv("WB/WB_hosp_bed.csv"),by="Country.Code",all=T)
# PolityIV index ----
polityIV <- read.csv("Politics/polity4_v2018.csv")%>%
filter(year == 2018) %>%
mutate(Country=countrycode(scode,'p4c','country.name')) %>%
dplyr::select('Country','polity2')
# UN population data ----
UNpop <- read.csv("UN-Population/population_division_UN_Houseshold_Size_and_Composition_2019.csv") %>%
rename(Country = ï..Country) %>%
mutate(Country = recode(Country, "RÃ©union" = "Reunion", "Saint-BarthÃ©lemy" = "Saint-Barthelemy")) %>%
mutate(Country = countrycode(Country,"country.name","country.name")) %>%
group_by(Country) %>%
filter(date==last(date)) %>%
distinct(Country,date)
# Elections ----
`%notin%` <- Negate(`%in%`)
elections<-read.csv("Politics/DPI2017_basefile_Jan2018.csv") %>%
mutate(ifs = recode(ifs, "ROM" = "ROU", "TMP" = "TLS", "ZAR" = "COD")) %>%
filter(ifs %notin% c("CSK", "DDR", "SUN", "YMD", "YSR", "0", "")) %>%
mutate(Country=countrycode(ifs,'wb','country.name')) %>%
arrange(Country,year) %>%
group_by(Country)%>%
summarise(ElectionYear=last(year),ElectionWin=last(percent1),Country.Code=first(ifs))%>%
naniar::replace_with_na_at(.vars = c("ElectionYear","ElectionWin","Country.Code"),
condition = ~.x == -999)%>%
drop_na()
#RolFluElec<-merge(RolFlu,elections,by="Country.Code",all=T)%>%
# mutate(Country=Country.x)
# Social preferences
social_prefs<-read.csv("Briq/socialprefs.csv")%>%
rename(Country=country)%>%
mutate(Country=countrycode(Country,"country.name","country.name"))
# Basic country co-variates (source?)
countries<-read.csv("Countries/countries_custom.csv")%>%
#naniar::replace_with_na_at(.vars!=c("Population","Service"),condition = ~.x == -999.000)%>%
na_if(.,-999)%>%
mutate(Country = recode(Country, "Central African Rep. " = "Central African Republic",
"Virgin Islands " = "U.S. Virgin Islands")) %>%
mutate(Country=countrycode(Country,"country.name","country.name"))
#Collectivism - Hofstede
hf<-read.csv("Collectivism/hofstede.csv")%>%
mutate(Country=countrycode(Country,"country.name","country.name"))%>%
mutate(COL=100-IDV)
# Merge into single dataframes ----
# Short version (pure cross-section)
df_short <- merge(merge(merge(merge(merge(merge(merge(merge(merge(merge(merge(
mobility_short,
DaysLock_short,by="Country",all=T),
wvs,by="Country",all=T),
weather_short,by="Country",all=T),
wb,by="Country",all=T),
elections,by="Country",all=T),
rol,by="Country",all=T),
social_prefs,by="Country",all=T),
countries,by="Country",all=T),
polityIV, by="Country",all=T),
UNpop, by="Country",all=T),
hf,by="Country",all=T)
df_short<-df_short%>%
filter(!is.na(Country))
df_short$Death_pc<-df_short$TotalDeaths/df_short$Population
df_short$Confirmed_pc<-df_short$TotalCases/df_short$Population
df2<-subset(df_short,df_short$Province!="Faroe Islands")
df2$Log_Death_pc<-ifelse(df2$Death_pc>0,log(df2$Death_pc),NA)
df2$Google_pc<-df2$Google/df2$Population
df2$Log_Google_pc<-ifelse(df2$Google_pc>0,log(df2$Google_pc),NA)%>%
mutate(DateLockDown=as.Date(DateLockDown,format="%d/%m/%Y"))%>%
mutate(Date=as.Date(Date))
write.csv(df2,"02052020_short.csv")
# Long version (daily data)
df_long<-merge(merge(merge(merge(merge(merge(merge(merge(merge(merge(merge(
mobility_weather_death,
lockdown,by="Country",all=T),
wvs,by="Country",all=T),
wb,by="Country",all=T),
elections,by="Country",all=T),
rol,by="Country",all=T),
social_prefs,by="Country",all=T),
countries,by="Country",all=T),
time_short,by="Country",all=T),
polityIV,by="Country",all=T),
UNpop,by="Country",all=T),
hf,by="Country",all=T)
df_long<-df_long%>%
filter(!is.na(Country))
df_long$Death_pc<-df_long$total_deaths/df_long$Population
df_long$Confirmed_pc<-df_long$total_cases/df_long$Population
df3<-subset(df_long,df_long$Province!="Faroe Islands")
df3$Log_Death_pc<-ifelse(df3$Death_pc>0,log(df3$Death_pc),NA)
df3$Google_pc<-df3$DeathsBeforeGoogle/df3$Population
df3$Log_Google_pc<-ifelse(df3$Google_pc>0,log(df3$Google_pc),NA)%>%
mutate(DateLockDown=as.Date(DateLockDown,format="%d/%m/%Y"))%>%
mutate(Date=as.Date(Date))
write.csv(df3,"02052020_long.csv")
df3<-df3%>%
mutate(DateLockDown=as.Date(DateLockDown,format="%d/%m/%Y"))%>%
mutate(Date=as.Date(Date))
write.csv(df3,"02052020_long.csv")
df2<-df2%>%
mutate(DateLockDown=as.Date(DateLockDown,format="%d/%m/%Y"))%>%
mutate(Date=as.Date(Date))
write.csv(df2,"02052020_short.csv")
df<-read.csv(here::here("02052020_short.csv"))
dfl<-read.csv(here::here("02052020_long.csv"))
dfl%>%
filter(TotalDeaths>1)%>%
filter(!is.na(Movement))%>%
filter(!is.na(Lock))%>%
arrange(Country,as.Date(Date))%>%
mutate(InLock=ifelse(as.Date(Date)<as.Date(DateLockDown),1,0))%>%
filter(Country=="Germany")%>%
#filter(!is.na(COL))%>%
mutate(CaseLog=scale(log(TotalCases)))%>%
mutate(DeathLog=scale(log(TotalDeaths)))%>%
# mutate(Country = forcats::fct_reorder(Country,-Movement)) %>%
ggplot(aes(x=as.Date(Date),y=Movement,colour=InLock))+
geom_line(size=1.5) +
geom_line(InLock==1,linetype="dashed",size=1.5)
dfl%>%
filter(TotalDeaths>1)%>%
filter(!is.na(Movement))%>%
filter(!is.na(Lock))%>%
arrange(Country,as.Date(Date))%>%
mutate(InLock=ifelse(as.Date(Date)<as.Date(DateLockDown),1,0))
dfl%>%
filter(TotalDeaths>1)%>%
filter(!is.na(Movement))%>%
filter(!is.na(Lock))%>%
arrange(Country,as.Date(Date))%>%
mutate(InLock=ifelse(as.Date(Date)<as.Date(DateLockDown),0,1))
dfl%>%
filter(TotalDeaths>1)%>%
filter(!is.na(Movement))%>%
filter(!is.na(Lock))%>%
arrange(Country,as.Date(Date))%>%
mutate(InLock=ifelse(as.Date(Date)<as.Date(DateLockDown),0,1))%>%
filter(Country=="Germany")%>%
#filter(!is.na(COL))%>%
mutate(CaseLog=scale(log(TotalCases)))%>%
mutate(DeathLog=scale(log(TotalDeaths)))%>%
# mutate(Country = forcats::fct_reorder(Country,-Movement)) %>%
ggplot(aes(x=as.Date(Date),y=Movement,colour=InLock))+
geom_line(size=1.5)
dfl%>%
filter(TotalDeaths>1)%>%
filter(!is.na(Movement))%>%
filter(!is.na(Lock))%>%
arrange(Country,as.Date(Date))%>%
mutate(InLock=ifelse(as.Date(Date)<as.Date(DateLockDown),0,1))%>%
filter(Country=="Germany")%>%
#filter(!is.na(COL))%>%
mutate(CaseLog=scale(log(TotalCases)))%>%
mutate(DeathLog=scale(log(TotalDeaths)))%>%
# mutate(Country = forcats::fct_reorder(Country,-Movement)) %>%
ggplot(aes(x=as.Date(Date),y=Movement,colour=InLock))+
geom_line(size=1.5) +
geom_line([dfl$InLock==1,],linetype="dashed",size=1.5)
dfl%>%
filter(TotalDeaths>1)%>%
filter(!is.na(Movement))%>%
filter(!is.na(Lock))%>%
arrange(Country,as.Date(Date))%>%
mutate(InLock=ifelse(as.Date(Date)<as.Date(DateLockDown),0,1))%>%
filter(Country=="Germany")%>%
#filter(!is.na(COL))%>%
mutate(CaseLog=scale(log(TotalCases)))%>%
mutate(DeathLog=scale(log(TotalDeaths)))%>%
# mutate(Country = forcats::fct_reorder(Country,-Movement)) %>%
ggplot(aes(x=as.Date(Date),y=Movement,group=Country,colour=InLock))+
geom_line(size=1.5) +
geom_line(linetype="dashed",size=1.5)
dfl%>%
filter(TotalDeaths>1)%>%
filter(!is.na(Movement))%>%
filter(!is.na(Lock))%>%
arrange(Country,as.Date(Date))%>%
mutate(InLock=ifelse(as.Date(Date)<as.Date(DateLockDown),0,1))%>%
filter(Country=="Germany")%>%
#filter(!is.na(COL))%>%
mutate(CaseLog=scale(log(TotalCases)))%>%
mutate(DeathLog=scale(log(TotalDeaths)))%>%
# mutate(Country = forcats::fct_reorder(Country,-Movement)) %>%
ggplot(aes(x=as.Date(Date),y=Movement,group=Country,colour=InLock))+
geom_line(size=1.5)
dfl%>%
filter(TotalDeaths>1)%>%
filter(!is.na(Movement))%>%
filter(!is.na(Lock))%>%
arrange(Country,as.Date(Date))%>%
mutate(InLock=ifelse(as.Date(Date)<as.Date(DateLockDown),0,1))%>%
#filter(Country=="Germany")%>%
#filter(!is.na(COL))%>%
mutate(CaseLog=scale(log(TotalCases)))%>%
mutate(DeathLog=scale(log(TotalDeaths)))%>%
# mutate(Country = forcats::fct_reorder(Country,-Movement)) %>%
ggplot(aes(x=as.Date(Date),y=Movement,group=Country,colour=InLock))+
geom_line(size=1.5)
dfl%>%
filter(TotalDeaths>1)%>%
filter(!is.na(Movement))%>%
filter(!is.na(Lock))%>%
arrange(Country,as.Date(Date))%>%
mutate(InLock=ifelse(as.Date(Date)<as.Date(DateLockDown),0,1))%>%
filter(Country=="Germany")%>%
#filter(!is.na(COL))%>%
mutate(CaseLog=scale(log(TotalCases)))%>%
mutate(DeathLog=scale(log(TotalDeaths)))%>%
# mutate(Country = forcats::fct_reorder(Country,-Movement)) %>%
ggplot(aes(x=as.Date(Date),y=Movement,colour=Country,linetype=InLock))+
geom_line(size=1.5)
dfl%>%
filter(TotalDeaths>1)%>%
filter(!is.na(Movement))%>%
filter(!is.na(Lock))%>%
arrange(Country,as.Date(Date))%>%
mutate(InLock=as.factor(ifelse(as.Date(Date)<as.Date(DateLockDown),0,1)))%>%
filter(Country=="Germany")%>%
#filter(!is.na(COL))%>%
mutate(CaseLog=scale(log(TotalCases)))%>%
mutate(DeathLog=scale(log(TotalDeaths)))%>%
# mutate(Country = forcats::fct_reorder(Country,-Movement)) %>%
ggplot(aes(x=as.Date(Date),y=Movement,colour=Country,linetype=InLock))+
geom_line(size=1.5)
dfl%>%
filter(TotalDeaths>1)%>%
filter(!is.na(Movement))%>%
filter(!is.na(Lock))%>%
arrange(Country,as.Date(Date))%>%
mutate(InLock=as.factor(ifelse(as.Date(Date)<as.Date(DateLockDown),0,1)))%>%
# filter(Country=="Germany")%>%
#filter(!is.na(COL))%>%
mutate(CaseLog=scale(log(TotalCases)))%>%
mutate(DeathLog=scale(log(TotalDeaths)))%>%
# mutate(Country = forcats::fct_reorder(Country,-Movement)) %>%
ggplot(aes(x=as.Date(Date),y=Movement,colour=Country,linetype=InLock))+
geom_line(size=1.5)
dfl%>%
filter(TotalDeaths>1000)%>%
filter(!is.na(Movement))%>%
filter(!is.na(Lock))%>%
arrange(Country,as.Date(Date))%>%
mutate(InLock=as.factor(ifelse(as.Date(Date)<as.Date(DateLockDown),0,1)))%>%
# filter(Country=="Germany")%>%
#filter(!is.na(COL))%>%
mutate(CaseLog=scale(log(TotalCases)))%>%
mutate(DeathLog=scale(log(TotalDeaths)))%>%
# mutate(Country = forcats::fct_reorder(Country,-Movement)) %>%
ggplot(aes(x=as.Date(Date),y=Movement,colour=Country,linetype=InLock))+
geom_line(size=1.5) +
#scale_colour_brewer(palette = 'Set1')+
#guides(colour="legend")
scale_color_discrete(guide = FALSE)
dfl$Region
dfl%>%
filter(TotalDeaths>1000)%>%
filter(!is.na(Movement))%>%
filter(!is.na(Lock))%>%
arrange(Country,as.Date(Date))%>%
mutate(InLock=as.factor(ifelse(as.Date(Date)<as.Date(DateLockDown),0,1)))%>%
# filter(Country=="Germany")%>%
#filter(!is.na(COL))%>%
mutate(CaseLog=scale(log(TotalCases)))%>%
mutate(DeathLog=scale(log(TotalDeaths)))%>%
# mutate(Country = forcats::fct_reorder(Country,-Movement)) %>%
group_by(Country, Region)%>%
ggplot(aes(x=as.Date(Date),y=Movement,colour=Country,linetype=InLock))+
geom_line(size=1) +
#scale_colour_brewer(palette = 'Set1')+
#guides(colour="legend")
scale_color_discrete(guide = FALSE)+
#geom_vline(xintercept=DateLockDown)+
#geom_hline(yintercept=-46)+
#geom_point(aes(colour=Lock),alpha=0.9,size=2)+
#guides(colour="legend")+
facet_wrap(~Region)
dfl%>%
# filter(TotalDeaths>1000)%>%
filter(!is.na(Movement))%>%
filter(!is.na(Lock))%>%
arrange(Country,as.Date(Date))%>%
mutate(InLock=as.factor(ifelse(as.Date(Date)<as.Date(DateLockDown),0,1)))%>%
# filter(Country=="Germany")%>%
#filter(!is.na(COL))%>%
mutate(CaseLog=scale(log(TotalCases)))%>%
mutate(DeathLog=scale(log(TotalDeaths)))%>%
# mutate(Country = forcats::fct_reorder(Country,-Movement)) %>%
group_by(Country, Region)%>%
ggplot(aes(x=as.Date(Date),y=Movement,colour=Country,linetype=InLock))+
geom_line(size=1) +
#scale_colour_brewer(palette = 'Set1')+
#guides(colour="legend")
scale_color_discrete(guide = FALSE)+
#geom_vline(xintercept=DateLockDown)+
#geom_hline(yintercept=-46)+
#geom_point(aes(colour=Lock),alpha=0.9,size=2)+
#guides(colour="legend")+
facet_wrap(~Region)
dfl%>%
# filter(TotalDeaths>1000)%>%
filter(!is.na(Movement))%>%
filter(!is.na(Lock))%>%
arrange(Country,as.Date(Date))%>%
mutate(InLock=as.factor(ifelse(as.Date(Date)<as.Date(DateLockDown),0,1)))%>%
# filter(Country=="Germany")%>%
#filter(!is.na(COL))%>%
mutate(CaseLog=scale(log(TotalCases)))%>%
mutate(DeathLog=scale(log(TotalDeaths)))%>%
# mutate(Country = forcats::fct_reorder(Country,-Movement)) %>%
group_by(Country, Region)%>%
ggplot(aes(x=as.Date(Date),y=Movement,colour=Country,linetype=InLock))+
geom_line(size=1) +
#scale_colour_brewer(palette = 'Set1')+
#guides(colour="legend")
#scale_color_discrete(guide = FALSE)+
#geom_vline(xintercept=DateLockDown)+
#geom_hline(yintercept=-46)+
#geom_point(aes(colour=Lock),alpha=0.9,size=2)+
#guides(colour="legend")+
facet_wrap(~Region)
dfl%>%
# filter(TotalDeaths>1000)%>%
filter(!is.na(Movement))%>%
filter(!is.na(Lock))%>%
arrange(Country,as.Date(Date))%>%
mutate(InLock=as.factor(ifelse(as.Date(Date)<as.Date(DateLockDown),0,1)))%>%
# filter(Country=="Germany")%>%
#filter(!is.na(COL))%>%
mutate(CaseLog=scale(log(TotalCases)))%>%
mutate(DeathLog=scale(log(TotalDeaths)))%>%
# mutate(Country = forcats::fct_reorder(Country,-Movement)) %>%
group_by(Country, Region)%>%
ggplot(aes(x=as.Date(Date),y=Movement,colour=Country,linetype=InLock))+
geom_line(size=1) +
#scale_colour_brewer(palette = 'Set1')+
#guides(colour="legend")
scale_color_discrete(guide = FALSE)+
#geom_vline(xintercept=DateLockDown)+
#geom_hline(yintercept=-46)+
#geom_point(aes(colour=Lock),alpha=0.9,size=2)+
#guides(colour="legend")+
facet_wrap(~Region)+
# scale_y_discrete()+
#scale_x_discrete()+
labs(x = 'log_TotalDeaths',y = "Movement",color="Lockdown")+
theme_bw()+
geom_text_repel(aes(x=Date,y=Movement,label=Country))
dfl%>%
# filter(TotalDeaths>1000)%>%
filter(!is.na(Movement))%>%
filter(!is.na(Lock))%>%
arrange(Country,as.Date(Date))%>%
mutate(InLock=as.factor(ifelse(as.Date(Date)<as.Date(DateLockDown),0,1)))%>%
# filter(Country=="Germany")%>%
#filter(!is.na(COL))%>%
mutate(CaseLog=scale(log(TotalCases)))%>%
mutate(DeathLog=scale(log(TotalDeaths)))%>%
# mutate(Country = forcats::fct_reorder(Country,-Movement)) %>%
group_by(Country, Region)%>%
ggplot(aes(x=as.Date(Date),y=Movement,colour=Country,linetype=InLock))+
geom_line(size=1) +
#scale_colour_brewer(palette = 'Set1')+
#guides(colour="legend")
scale_color_discrete(guide = FALSE)+
#geom_vline(xintercept=DateLockDown)+
#geom_hline(yintercept=-46)+
#geom_point(aes(colour=Lock),alpha=0.9,size=2)+
#guides(colour="legend")+
facet_wrap(~Region)+
# scale_y_discrete()+
#scale_x_discrete()+
#labs(x = 'log_TotalDeaths',y = "Movement",color="Lockdown")+
theme_bw()
?scale_color_brewer
dfl%>%
# filter(TotalDeaths>1000)%>%
filter(!is.na(Movement))%>%
filter(!is.na(Lock))%>%
arrange(Country,as.Date(Date))%>%
mutate(InLock=as.factor(ifelse(as.Date(Date)<as.Date(DateLockDown),0,1)))%>%
# filter(Country=="Germany")%>%
#filter(!is.na(COL))%>%
mutate(CaseLog=scale(log(TotalCases)))%>%
mutate(DeathLog=scale(log(TotalDeaths)))%>%
# mutate(Country = forcats::fct_reorder(Country,-Movement)) %>%
group_by(Country, Region)%>%
ggplot(aes(x=as.Date(Date),y=Movement,colour=Country,linetype=InLock))+
geom_line(size=1) +
#scale_colour_brewer(palette = 'Set1')+
#guides(colour="legend")
scale_color_discrete(guide = FALSE)+
#geom_vline(xintercept=DateLockDown)+
#geom_hline(yintercept=-46)+
#geom_point(aes(colour=Lock),alpha=0.9,size=2)+
#guides(colour="legend")+
facet_wrap(~Region)+
scale_color_brewer()+
# scale_y_discrete()+
#scale_x_discrete()+
#labs(x = 'log_TotalDeaths',y = "Movement",color="Lockdown")+
theme_bw()
dfl%>%
# filter(TotalDeaths>1000)%>%
filter(!is.na(Movement))%>%
filter(!is.na(Lock))%>%
arrange(Country,as.Date(Date))%>%
mutate(InLock=as.factor(ifelse(as.Date(Date)<as.Date(DateLockDown),0,1)))%>%
# filter(Country=="Germany")%>%
#filter(!is.na(COL))%>%
mutate(CaseLog=scale(log(TotalCases)))%>%
mutate(DeathLog=scale(log(TotalDeaths)))%>%
# mutate(Country = forcats::fct_reorder(Country,-Movement)) %>%
group_by(Country, Region)%>%
ggplot(aes(x=as.Date(Date),y=Movement,colour=Country,linetype=InLock))+
geom_line(size=1) +
#scale_colour_brewer(palette = 'Set1')+
#guides(colour="legend")
scale_color_discrete(guide = FALSE)+
#geom_vline(xintercept=DateLockDown)+
#geom_hline(yintercept=-46)+
#geom_point(aes(colour=Lock),alpha=0.9,size=2)+
#guides(colour="legend")+
facet_wrap(~Region)+
#scale_color_brewer()+
# scale_y_discrete()+
#scale_x_discrete()+
#labs(x = 'log_TotalDeaths',y = "Movement",color="Lockdown")+
theme_bw()
dfl%>%
# filter(TotalDeaths>1000)%>%
filter(!is.na(Movement))%>%
filter(!is.na(Lock))%>%
arrange(Country,as.Date(Date))%>%
mutate(InLock=as.factor(ifelse(as.Date(Date)<as.Date(DateLockDown),0,1)))%>%
filter(!is.na(InLock))%>%
# filter(Country=="Germany")%>%
#filter(!is.na(COL))%>%
mutate(CaseLog=scale(log(TotalCases)))%>%
mutate(DeathLog=scale(log(TotalDeaths)))%>%
# mutate(Country = forcats::fct_reorder(Country,-Movement)) %>%
group_by(Country, Region)%>%
ggplot(aes(x=as.Date(Date),y=Movement,colour=Country,linetype=InLock))+
geom_line(size=1) +
#scale_colour_brewer(palette = 'Set1')+
#guides(colour="legend")
scale_color_discrete(guide = FALSE)+
#geom_vline(xintercept=DateLockDown)+
#geom_hline(yintercept=-46)+
#geom_point(aes(colour=Lock),alpha=0.9,size=2)+
#guides(colour="legend")+
facet_wrap(~Region)+
#scale_color_brewer()+
# scale_y_discrete()+
#scale_x_discrete()+
#labs(x = 'log_TotalDeaths',y = "Movement",color="Lockdown")+
theme_bw()
dfl%>%
# filter(TotalDeaths>1000)%>%
filter(!is.na(Movement))%>%
filter(!is.na(Lock))%>%
arrange(Country,as.Date(Date))%>%
mutate(InLock=as.factor(ifelse(as.Date(Date)<as.Date(DateLockDown),0,1)))%>%
filter(!is.na(InLock))%>%
# filter(Country=="Germany")%>%
#filter(!is.na(COL))%>%
mutate(CaseLog=scale(log(TotalCases)))%>%
mutate(DeathLog=scale(log(TotalDeaths)))%>%
# mutate(Country = forcats::fct_reorder(Country,-Movement)) %>%
group_by(Country, Region)%>%
ggplot(aes(x=as.Date(Date),y=Movement,colour=Country,linetype=InLock))+
geom_line(size=1) +
#scale_colour_brewer(palette = 'Set1')+
#guides(colour="legend")
scale_color_discrete(guide = FALSE)+
#geom_vline(xintercept=DateLockDown)+
#geom_hline(yintercept=-46)+
#geom_point(aes(colour=Lock),alpha=0.9,size=2)+
#guides(colour="legend")+
facet_wrap(~Region)+
#scale_color_brewer()+
# scale_y_discrete()+
#scale_x_discrete()+
labs(x = 'Date',y = "Movement",color="Lockdown")+
theme_bw()
