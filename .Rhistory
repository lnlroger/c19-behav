setwd("C:/Users/lnlro/Dropbox/Research/COVID-19/COVID-19/Weather_new")
setwd("..")
install.packages("fuzzyjoin")
library(tidyverse)
library(countrycode)
#Source: https://www.ncei.noaa.gov/access/search/data-search/global-summary-of-the-day?pageSize=100&dataTypes=%5B%22DEWP%22,%22FRSHTT%22,%22GUST%22,%22MAX%22,%22MIN%22,%22MXSPD%22,%22PRCP%22,%22SLP%22,%22SNDP%22,%22STP%22,%22TEMP%22,%22VISIB%22,%22WDSP%22%5D&bbox=%5B%2239.266,22.500,36.880,25.357%22%5D&startDate=%5B%222019-12-01T00:00:00%22%5D&endDate=%5B%222020-01-01T23:59:59%22%5D
library("lubridate")
library(fuzzyjoin)
library(ggmap)
source("Weather_new/ImportWeather.r")
source("Google/import_mobility.R")
source("Briq/import_social-prefs.r")
wdget()
getwd()
#Source: https://www.ncei.noaa.gov/access/search/data-search/global-summary-of-the-day?pageSize=100&dataTypes=%5B%22DEWP%22,%22FRSHTT%22,%22GUST%22,%22MAX%22,%22MIN%22,%22MXSPD%22,%22PRCP%22,%22SLP%22,%22SNDP%22,%22STP%22,%22TEMP%22,%22VISIB%22,%22WDSP%22%5D&bbox=%5B%2239.266,22.500,36.880,25.357%22%5D&startDate=%5B%222019-12-01T00:00:00%22%5D&endDate=%5B%222020-01-01T23:59:59%22%5D
library("lubridate")
library(tidyverse)
library(countrycode)
library(fuzzyjoin)
library(ggmap)
source("Weather_new/ImportWeather.r")
source("Google/import_mobility.R")
source("Briq/import_social-prefs.r")
View(cities)
View(gps_coord)
?ggmap
?get_map
map1 <- get_map()
ggmap(ggmap = map1)
register_google(key = "AIzaSyAHf0RUy4W9WiRQDzWG3jVV8UwLUxcmHyY")
map1 <- get_map()
ggmap(ggmap = map1)
map1 <- get_map(location = "Europe", zoom = 3)
ggmap(ggmap = map1)
map1 <- get_map(location = "Europe", zoom = 5)
ggmap(ggmap = map1)
map1 <- get_map(location = "Europe", zoom = 5)
ggmap(ggmap = map1)
map1 <- get_map(location = "United Kingdom", zoom = 5)
ggmap(ggmap = map1)
map1 <- get_map(location = "United Kingdom", zoom = 6)
ggmap(ggmap = map1)
map1 <- get_map(location = "United Kingdom", zoom = 6)
ggmap(ggmap = map1)
map1 <- get_map(location = "United Kingdom", zoom = 5)
ggmap(ggmap = map1)
map1 <- get_map(location = "United Kingdom", zoom = 5)
register_google(key = "AIzaSyAHf0RUy4W9WiRQDzWG3jVV8UwLUxcmHyY")
map1 <- get_map(location = "United Kingdom", zoom = 5)
ggmap(ggmap = map1)
View(weather)
View(mobility)
View(gps_coord)
interGoogle_GPS<-short_mob%>%
filter(Country %in% gps_coord$Country)
interGPS_Google<-gps_coord%>%
filter(Country %in% mobility_regional$Country)
GpsGoo<-
fuzzy_inner_join(interGPS_Google, interGoogle_GPS,
by=c("lat"="SouthHalf", "lat"="NorthHalf","lon"="WestHalf","lon"="EastHalf"),
match_fun=list(`>=`, `<=`,`>=`,`<=`))
GpsGoog<-GpsGoo%>%
group_by(lat,lon)%>%
summarise_all(first)
q<-GpsGoog%>%
group_by(Country.x)%>%
#rename(Country=Country.x)
summarise(n())
View(q)
View(GpsGoog)
uk <- GpsGoog %>%
filter(Country == "United Kingdom")
uk <- GpsGoog %>%
filter(Country.x == "United Kingdom")
View(uk)
ggmap(ggmap = map1) +
geom_rect(data=uk, mapping=aes(xmin=west, xmax=east, ymin=south, ymax=north, fill=t), color="black", alpha=0.5)
ggmap(ggmap = map1) +
geom_rect(data=uk, mapping=aes(xmin=west, xmax=east, ymin=south, ymax=north), color="black", alpha=0.5)
ggmap(ggmap = map1) +
geom_rect(data=uk, mapping=aes(xmin=west, xmax=east, ymin=south, ymax=north), color="green", alpha=0.5)
ggmap(ggmap = map1) +
geom_rect(data=uk, mapping=aes(xmin=west, xmax=east, ymin=south, ymax=north), color="green", alpha=0.5) +
geom_rect(data=uk, mapping=aes(xmin=West, xmax=East, ymin=South, ymax=North), color="red", alpha=0.5)
View(gps_coord)
uk.gps_coord <- gps_coord %>%
filter(Country == "United Kingdom")
View(uk.gps_coord)
ggmap(ggmap = map1) +
geom_rect(data=uk, mapping=aes(xmin=west, xmax=east, ymin=south, ymax=north), color="green", alpha=0.5) +
geom_rect(data=uk, mapping=aes(xmin=West, xmax=East, ymin=South, ymax=North), color="red", alpha=0.5) +
geom_point(data = uk.gps_coord, aes(x=lon,y=lat))
ggmap(ggmap = map1) +
geom_rect(data=uk, mapping=aes(xmin=west, xmax=east, ymin=south, ymax=north), color="green", alpha=0.5) +
geom_rect(data=uk, mapping=aes(xmin=West, xmax=East, ymin=South, ymax=North), color="red", alpha=0.5) +
geom_point(data = uk.gps_coord, aes(x=lon,y=lat), colour = "blue")
